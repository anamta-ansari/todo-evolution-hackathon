# Data Model: AI-Powered Todo Chatbot

## Entity: Conversation
**Description**: Represents a sequence of messages between a user and the AI assistant

**Fields**:
- id: integer (primary key, auto-increment)
- user_id: string (foreign key to users.id, indexed)
- created_at: timestamp (default: now)
- updated_at: timestamp (default: now, auto-update)

**Relationships**:
- Belongs to User (many-to-one)
- Has many Messages (one-to-many)

**Validation**:
- user_id must exist in users table
- created_at and updated_at are automatically managed

## Entity: Message
**Description**: Represents individual messages within a conversation

**Fields**:
- id: integer (primary key, auto-increment)
- user_id: string (foreign key to users.id, indexed)
- conversation_id: integer (foreign key to conversations.id, indexed)
- role: enum ('user' | 'assistant')
- content: text (not null)
- created_at: timestamp (default: now)

**Relationships**:
- Belongs to User (many-to-one)
- Belongs to Conversation (many-to-one)

**Validation**:
- user_id must exist in users table
- conversation_id must exist in conversations table
- role must be either 'user' or 'assistant'
- content cannot be empty

## Entity: Task (existing from Phase II)
**Description**: Represents individual todo items associated with users

**Fields**:
- id: integer (primary key, auto-increment)
- user_id: string (foreign key to users.id, indexed)
- title: string (not null, 1-200 characters)
- description: string (optional, max 1000 characters)
- completed: boolean (default: false)
- created_at: timestamp (default: now)
- updated_at: timestamp (default: now, auto-update)

**Relationships**:
- Belongs to User (many-to-one)

**Validation**:
- user_id must exist in users table
- title must be 1-200 characters
- completed is boolean

## Entity: User (existing from Phase II)
**Description**: Represents application users with authentication credentials

**Fields**:
- id: string (primary key)
- email: string (unique, not null)
- name: string (optional)
- created_at: timestamp (default: now)
- updated_at: timestamp (default: now, auto-update)

**Relationships**:
- Has many Tasks (one-to-many)
- Has many Conversations (one-to-many)
- Has many Messages (one-to-many)

**Validation**:
- email must be unique and valid format
- id is automatically generated by auth system

## Indexes
- conversations: index on (user_id, updated_at DESC)
- messages: index on (conversation_id, created_at ASC)
- tasks: index on (user_id, completed) [from Phase II]